{% comment %}
This is just the default navbar. It's safe to assume that any page that this navbar is included
on will have access to all the bootstrap styles and other libraries imported in the skeleton template.
{% endcomment %}
{% load static %}

<nav class="navbar navbar-expand-md py-md-4 bg-body-tertiary">
    <div class="container-fluid">
        <a href="{% url 'index' %}" class="navbar-brand m-0 p-0" style="color:#191919;">
            {% comment %} Logo SVG {% endcomment %}
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="70.168" viewBox="0 0 50 70.168"><path d="M42.244 6.921c.406.414.537.696.56 1.272l.019.408.014.441.02.466q.027.627.048 1.254.024.653.051 1.306l.073 1.876q.051 1.406.116 2.811l.079 1.819.039.856q.027.593.05 1.186l.018.351c.02.591.024.99-.371 1.466-.301.229-.44.241-.82.213-.429-.106-.579-.231-.879-.549l-.268-.276-.271-.29-.542-.568-.24-.254c-.186-.211-.186-.211-.441-.184-.203.253-.203.253-.411.58l-.247.374-.259.396-.251.38c-.3.456-.3.456-.596.911l-.331.504a26 26 0 0 0-1.47 2.636l-.229.458-.476.956-.597 1.201q-.574 1.151-1.143 2.304-.341.694-.691 1.386l-.331.669-.151.294c-.476.976-.352 1.777-.161 2.817l.054.309q.09.501.184 1.004l.064.354a133 133 0 0 0 2.036 9.162l.224.872.151.584.076.294a278 278 0 0 0 .46 1.754l.288 1.104q.068.26.139.521.096.359.188.719l.109.41c.031.333.031.333-.1.546-.281.18-.536.261-.858.348l-.391.107-.426.112-.444.121q-.587.16-1.174.316l-2.074.561-.456.124a188 188 0 0 0-2.901.813l-.339.098a26 26 0 0 0-1.984.676c-.274.092-.274.092-.633.092a28 28 0 0 1-.196-2.094l-.021-.331-.044-.704-.117-1.876-.024-.389a583 583 0 0 0-.276-4.084l-.024-.343-.131-1.874-.094.221-1.004 2.324-.372.861a234 234 0 0 1-2.011 4.551l-.17.371-.154.339-.136.297c-.112.224-.112.224-.232.344l.323.057.424.084.42.08c.456.161.609.328.864.734.068.357.068.357 0 .716-.501.6-1.146.971-1.804 1.38l-.354.222-.72.451q-.74.464-1.478.931l-.557.351-1.866 1.184-.33.21-2.046 1.304-.993.63q-.54.341-1.073.694l-.213.139-.53.349c-.413.189-.714.193-1.164.15-.348-.264-.459-.42-.596-.834a29 29 0 0 1-.046-.981l-.01-.304-.033-1-.024-.703-.049-1.482-.05-1.5a533 533 0 0 1-.154-5.189q-.022-.906-.033-1.813l-.01-.44-.003-.396-.004-.339c.074-.389.227-.529.534-.771.424-.09.691-.092 1.064.146.581.49 1.079 1.066 1.574 1.64.204.249.204.249.461.36l.101-.264c.126-.304.264-.587.424-.876l.171-.314.184-.336.193-.352a129 129 0 0 1 1.299-2.303 130 130 0 0 0 1.99-3.619q.391-.731.794-1.456a49 49 0 0 0 1.966-3.946c.291-.654.606-1.292.932-1.929.459-.884.459-.884.508-1.859l-.04-.381a48 48 0 0 0-.264-1.814l-.064-.401-.21-1.28-.073-.444a156 156 0 0 0-1.344-7.186l-.124-.589-.064-.307-.131-.621-.316-1.482a43 43 0 0 1-.556-3.088l3.844-1.594q1.034-.429 2.067-.861l1.284-.536.614-.258q.428-.18.856-.356l.256-.109c.584-.24.584-.24.984-.106l.049.446.459 4.156.236 2.138.227 2.061.086.787.121 1.1.036.331.034.302.029.263c.033.254.033.254.154.586l.114-.254a949 949 0 0 1 2.524-5.604l.331-.73.191-.421a36 36 0 0 1 .537-1.103l-.35.022a3.5 3.5 0 0 1-1.559-.38c-.299-.448-.302-.664-.239-1.194.521-.65 1.256-1.04 1.954-1.476l.603-.381.413-.26q1.024-.651 2.042-1.32l.68-.444.324-.213q1.044-.681 2.094-1.358l1.008-.656.759-.489a54 54 0 0 0 1.026-.677l.506-.334.231-.16c.536-.348.874-.428 1.484-.227" fill="#191919"/></svg>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <form class="input-group px-4" role="search" method="GET" action="{% url 'listings:browse_search' %}">
                <span class="input-group-text bg-white"><i class="fa fa-search"></i></span>
                <input class="form-control" type="search" name="q" placeholder="Search textbooks" aria-label="Search"
                    value="{% if search_form.q and search_form.q.value %}{{ search_form.q.value }}{% endif %}">
                    {% comment %} Query stays in the search bar. {% endcomment %}
            </form>

            <div class="navbar-nav">
                <a href="{% url 'index' %}" class="nav-link">Home</a>
                <a href="{% url 'about' %}" class="nav-link">About</a>
                <a href="{% url 'listings:browse_search' %}" class="nav-link">Browse</a>
                <a href="{% url 'wishlist:all_requests' %}" class="nav-link">Requests</a>
                <a href="{% url 'listings:prelist' %}" class="nav-link">Sell</a>
                <a href="{% url 'cart:cart' %}" class="nav-link">
                    <i class="fa fa-cart-shopping position-relative">
                        {% if cart_notification %}
                            <span class="position-absolute top-0 start-100 translate-middle p-1 bg-success border border-light rounded-circle">
                                <span class="visually-hidden">New Cart Notification</span>
                            </span>
                        {% endif %}
                    </i>
                </a>
            
                {% if user.is_authenticated %}
                <a href="{% url 'user_profile' %}" class="nav-link">Profile</a>  {# Added User Profile Link #}
                <a href="{% url 'dashboard:dashboard' %}" class="nav-link">
                    <i class="fa fa-user position-relative">
                        {% if dashboard_notification %}
                            <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
                                <span class="visually-hidden">New dashboard Notification</span>
                            </span>
                        {% endif %}
                    </i>
                </a>
                <span class="nav-link">{{ user.email }}</span>
                
                <form action="{% url 'logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger">Logout</button>
                </form>
                {% else %}
                    <a href="{% url 'login' %}" class="btn btn-outline-primary">Login</a>
                {% endif %}
            </div>
            
        </div>
    </div>
</nav>